{% extends "base.html" %}

{% block content %}
    <h1>Groups</h1>
    <a href="{{ url_for('add_group_route') }}" class="special-button">Add New Group</a>
    
    <div class="search-form">
        <form method="GET" action="{{ url_for('groups') }}">
            <input type="text" name="search" placeholder="Search by group name or ID..." value="{{ search_term if search_term }}">
            <button type="submit" class="button">Search</button>
            {% if search_term %}
                <a href="{{ url_for('groups') }}" class="special-button">Clear</a>
            {% endif %}
        </form>
    </div>
    
    <div style="overflow-x: auto;">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Group Name</th>
                    <th>Group ID</th>
                    <th>Number of Students</th>
                    <th>Student ID 1</th>
                    <th>Student ID 2</th>
                    <th>Student ID 3</th>
                    <th>Student ID 4</th>
                    <th>Student ID 5</th>
                    <th>Course Name</th>
                    <th>Attended Sessions</th>
                    <th>Left Sessions</th>
                    <th>Schedule Day 1</th>
                    <th>Schedule Day 2</th>
                    <th>Time Slot 1</th>
                    <th>Time Slot 2</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for group in groups %}
                    <tr>
                        <td>{{ group[0] }}</td>          <!-- id -->
                        <td>{{ group[1] }}</td>          <!-- group_name -->
                        <td>{{ group[2] }}</td>          <!-- group_id -->
                        <td>{{ group[3] }}</td>          <!-- num_students -->
                        <td>{{ group[4] }}</td>          <!-- student_id_1 -->
                        <td>{{ group[5] }}</td>          <!-- student_id_2 -->
                        <td>{{ group[6] }}</td>          <!-- student_id_3 -->
                        <td>{{ group[7] }}</td>          <!-- student_id_4 -->
                        <td>{{ group[8] }}</td>          <!-- student_id_5 -->
                        <td>{{ group[9] }}</td>          <!-- course_name -->
                        <td>{{ group[10] }}</td>         <!-- num_attended_session -->
                        <td>{{ group[11] }}</td>         <!-- left_sessions -->
                        <td>{{ group[12] }}</td>         <!-- schedule_day_1 -->
                        <td>{{ group[13] }}</td>         <!-- schedule_day_2 -->
                        <td>{{ group[14] }}</td>         <!-- time_slot_1 -->
                        <td>{{ group[15] }}</td>         <!-- time_slot_2 -->
                        <td class="actions">
                            <a href="{{ url_for('edit_group_route', group_id=group[0]) }}" class="special-button">Edit</a>
                            <form action="{{ url_for('delete_group_route', group_id=group[0]) }}" method="POST" style="display: inline;">
                                <button type="submit" class="red-button" onclick="return confirm('Are you sure?')">Delete</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
