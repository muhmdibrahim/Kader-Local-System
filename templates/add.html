{% extends "base.html" %}

{% block title %}{% if item %}Edit{% else %}Add{% endif %} {{ item_type|capitalize }}{% endblock %}

{% block content %}
    <h1>{% if item %}Edit{% else %}Add New{% endif %} {{ item_type|capitalize }}</h1>
    
    <form method="post" action="{{ url_for(request.endpoint, **request.view_args) if item else url_for(request.endpoint) }}">
        {% if item_type == 'student' %}
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" name="name" id="name" value="{{ item[1] if item else '' }}" required>
            </div>

            <div class="form-group">
                <label for="student_id">Student ID:</label>
                <input type="text" name="student_id" id="student_id" value="{{ item[2] if item else '' }}" required>
            </div>

            <div class="form-group">
                <label for="level">Level:</label>
                <input type="text" name="level" id="level" value="{{ item[3] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" name="email" id="email" value="{{ item[4] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="phone">Phone:</label>
                <input type="tel" name="phone" id="phone" value="{{ item[5] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="num_courses">Number of Courses:</label>
                <input type="number" name="num_courses" id="num_courses" value="{{ item[6] if item else 0 }}">
            </div>
            <!--
            <div class="form-group">
                <label for="num_sessions">Number of Sessions:</label>
                <input type="number" name="num_sessions" id="num_sessions" value="{{ item[7] if item else 0 }}">
            </div>
            -->
            <div class="form-group">
                <label for="num_attended_session">Attended Sessions:</label>
                <input type="number" name="num_attended_session" id="num_attended_session" value="{{ item[12] if item else 0 }}">
            </div>
            <div class="form-group">
                <label for="num_excused_session">Excused Sessions:</label>
                <input type="number" name="num_excused_session" id="num_excused_session" value="{{ item[13] if item else 0 }}">
            </div>
            <!--
            <div class="form-group">
                <label for="left_sessions">Left Sessions:</label>
                <input type="number" name="left_sessions" id="left_sessions" value="{{ item[14] if item else 0 }}">
            </div>
            -->
            <div class="form-group">
                <label for="payment_paid">Payment Paid:</label>
                <input type="number" step="0.01" name="payment_paid" id="payment_paid" value="{{ item[15] if item else 0 }}">
            </div>
            <!--
            <div class="form-group">
                <label for="payment_left">Payment Left:</label>
                <input type="number" step="0.01" name="payment_left" id="payment_left" value="{{ item[16] if item else 0 }}">
            </div>
            -->
            <div class="form-group">
                <label for="schedule_day_1">Schedule Day 1:</label>
                <input type="text" name="schedule_day_1" id="schedule_day_1" value="{{ item[8] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="schedule_day_2">Schedule Day 2:</label>
                <input type="text" name="schedule_day_2" id="schedule_day_2" value="{{ item[9] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="time_slot_1">Time Slot 1:</label>
                <input type="text" name="time_slot_1" id="time_slot_1" value="{{ item[10] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="time_slot_2">Time Slot 2:</label>
                <input type="text" name="time_slot_2" id="time_slot_2" value="{{ item[11] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="account_type">Account Type:</label>
                <select name="account_type" id="account_type" required>
                    <option value="online">Online</option>
                    <option value="offline">Offline</option>
                </select>
            </div>

            <div class="form-group">
                <label for="num_of_students">Number of Students:</label>
                <input type="number" name="num_of_students" id="num_of_students" min="1" max="5" value="{{ item[19] if item else 1 }}">
            </div>
        {% elif item_type == 'group' %}
            <div class="form-group">
                <label for="group_name">Group Name:</label>
                <input type="text" name="group_name" id="group_name" value="{{ item[1] if item else '' }}" required>
            </div>

            <div class="form-group">
                <label for="group_id">Group ID:</label>
                <input type="text" name="group_id" id="group_id" value="{{ item[2] if item else '' }}" required>
            </div>

            <div class="form-group">
                <label for="num_students">Number of Students:</label>
                <input type="number" name="num_students" id="num_students" value="{{ item[3] if item else 0 }}">
            </div>

            <div class="form-group">
                <label for="student_id_1">Student ID 1:</label>
                <input type="text" name="student_id_1" id="student_id_1" value="{{ item[4] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="student_id_2">Student ID 2:</label>
                <input type="text" name="student_id_2" id="student_id_2" value="{{ item[5] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="student_id_3">Student ID 3:</label>
                <input type="text" name="student_id_3" id="student_id_3" value="{{ item[6] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="student_id_4">Student ID 4:</label>
                <input type="text" name="student_id_4" id="student_id_4" value="{{ item[7] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="student_id_5">Student ID 5:</label>
                <input type="text" name="student_id_5" id="student_id_5" value="{{ item[8] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="course_name">Course Name:</label>
                <input type="text" name="course_name" id="course_name" value="{{ item[9] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="num_attended_session">Attended Sessions:</label>
                <input type="number" name="num_attended_session" id="num_attended_session" value="{{ item[10] if item else 0 }}">
            </div>
            <!--
            <div class="form-group">
                <label for="left_sessions">Left Sessions:</label>
                <input type="number" name="left_sessions" id="left_sessions" value="{{ item[11] if item else 0 }}">
            </div>
            -->

            <div class="form-group">
                <label for="schedule_day_1">Schedule Day 1:</label>
                <input type="text" name="schedule_day_1" id="schedule_day_1" value="{{ item[12] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="schedule_day_2">Schedule Day 2:</label>
                <input type="text" name="schedule_day_2" id="schedule_day_2" value="{{ item[13] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="time_slot_1">Time Slot 1:</label>
                <input type="text" name="time_slot_1" id="time_slot_1" value="{{ item[14] if item else '' }}">
            </div>

            <div class="form-group">
                <label for="time_slot_2">Time Slot 2:</label>
                <input type="text" name="time_slot_2" id="time_slot_2" value="{{ item[15] if item else '' }}">
            </div>

        {% elif item_type == 'course' %}
            <!--<form method="post" action="{{ url_for('edit_course', course_id=item[0]) if item else url_for('add_course_route') }}">-->
            <div class="form-group">
                <label for="code">code:</label>
                <input type="text" name="code" id="code" value="{{ item[1] if item else '' }}" required>
            </div>
            <div class="form-group">
                <label for="title">title:</label>
                <input type="text" name="title" id="title" value="{{ item[2] if item else '' }}">
            </div>
            <div class="form-group">
                <label for="credit_hours">credit_hours:</label>
                <input type="number" name="credit_hours" id="credit_hours" value="{{ item[3] if item else '' }}" required>
            </div>
            {% for i in range(1, 13) %}
                <div class="form-group">
                    <label for="lesson_{{ i }}">Lesson {{ i }}:</label>
                    <input type="text" name="lesson_{{ i }}" id="lesson_{{ i }}" value="{{ item[3 + i] if item else '' }}">
                </div>
            {% endfor %}
        {% endif %}
        
        <button type="submit" class="button">{% if item %}Update{% else %}Add{% endif %} {{ item_type|capitalize }}</button>
        <a href="{{ 
            url_for('students') if item_type == 'student' 
            else url_for('groups') if item_type == 'group' 
            else url_for('courses') 
        }}" class="red-button">Cancel</a>
    </form>
{% endblock %}